{"componentChunkName":"component---src-templates-blog-post-js","path":"/essay/project-pomp/","result":{"data":{"site":{"siteMetadata":{"title":"Dev & Me","author":"junek3","siteUrl":"https://www.devn.me","comment":{"disqusShortName":"","utterances":"Junek3/junek3.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"ff2c653c-0de8-506f-8606-3ed42bc031d8","excerpt":"프로젝트를 시작하게 된 이유 ICPC Sinchon 운영진 활동중에 캠프 참가자 분들께 문자를 발송해야 하는 일이 많았는데 일일이 손으로 보내는 불편함을 해소하고자 특정 문자를 일괄적으로 보낼 수 있는 자체 서비스를 제작하게 되었다. 문자 서비스 제작을 마치고 팀원들과 다른 프로젝트를 진행하게 되었는데 내가 제출한 구글 폼을 확인 할 수 있으면 좋겠다는 팀원의 아이디어를 바탕으로 POMP 프로젝트를 시작하게 되었다. ICPC Sinchon…","html":"<h2 id=\"프로젝트를-시작하게-된-이유\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EB%A5%BC-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B2%8C-%EB%90%9C-%EC%9D%B4%EC%9C%A0\" aria-label=\"프로젝트를 시작하게 된 이유 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프로젝트를 시작하게 된 이유</h2>\n<p>ICPC Sinchon 운영진 활동중에 캠프 참가자 분들께 문자를 발송해야 하는 일이 많았는데 일일이 손으로 보내는 불편함을 해소하고자 특정 문자를 일괄적으로 보낼 수 있는 자체 서비스를 제작하게 되었다.</p>\n<p>문자 서비스 제작을 마치고 팀원들과 다른 프로젝트를 진행하게 되었는데 내가 제출한 구글 폼을 확인 할 수 있으면 좋겠다는 팀원의 아이디어를 바탕으로 POMP 프로젝트를 시작하게 되었다.</p>\n<p>ICPC Sinchon 운영진 활동중에 개발에 관심이 있는 분들을 만나서 같이 프로젝트를 하게 될 줄은 상상도 하지 못했는데 정말 좋은 팀원들을 만나서 즐겁게 개발 할 수 있었던 것 같다.</p>\n<p>지금까지는 튜토리얼 강의나 클론 코딩 강의를 보고 혼자서 개발 공부를 해왔고 POMP처럼 여러명이 협업해서 프로젝트를 해본 적이 없었다. </p>\n<p>처음 경험해 본 협업 프로젝트인만큼 프로젝트를 진행하면서 겪었던 경험들을 정리해볼 생각이다.</p>\n<h2 id=\"pomp\" style=\"position:relative;\"><a href=\"#pomp\" aria-label=\"pomp permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>POMP?</h2>\n<p>POMP는 자신이 작성하고 제출한 구글 폼을 폼이 닫힌 후에도 확인 할 수 있게 해주는 서비스이다.</p>\n<p>폼을 제출하고 나서 폼 배포자가 폼을 닫아버리면 제출 후 수정가능한 폼이라도 내가 제출한 폼을 확인 할 수 없게 된다.</p>\n<p>구글 폼 기능중에 내가 제출한 폼의 사본을 메일 주소로 보낼 수 있는 기능이 있지만 폼을 배포한 사람이 그 기능을 넣지 않으면 내가 제출한 폼의 내용을 확인 할 수 있는 방법이 없다.</p>\n<p>폼을 어떻게 하면 저장할 수 있을까 고민하다가 구글 익스텐션을 도입하기로 했고, 익스텐션에서 제출한 폼의 html문서를 서버로 보내 서버에서 데이터를 가공 후 DB에 저장하는 방식으로 구현하기로 했다.</p>\n<p>로그인 기능으로 유저에 따라 폼을 저장하게 해야 한다고 생각했고, POMP 구글 익스텐션에서 로그인 후에 폼 저장 기능을 켜고 폼을 제출하면 POMP 홈페이지에서 DB에 저장된 데이터를 렌더링해서 확인 할 수 있도록 했다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/35721370/110233356-c9904880-7f66-11eb-961b-cb0cdd27bc05.png\" alt=\"pomp_project\"></p>\n<h2 id=\"역할-분담\" style=\"position:relative;\"><a href=\"#%EC%97%AD%ED%95%A0-%EB%B6%84%EB%8B%B4\" aria-label=\"역할 분담 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>역할 분담</h2>\n<p>처음에는 역할 분담을 3분류로 나누어서 하기로 했는데</p>\n<ul>\n<li>프론트 (1명) : 로그인 페이지, 메인 페이지 구현, 백엔드에서 받은 데이터 렌더링</li>\n<li>백엔드 (1명) : 로그인 및 회원가입 구현, API 라우터 구현</li>\n<li>크롬 익스텐션 개발 (1명) : 크롬 익스텐션 제작 및 크롤링(데이터 가공) 서버 부분 담당</li>\n</ul>\n<p>각자 잘하는 분야도 다르고 도중에 막힌 경우 서로 도우면서 진행하다 보니 맡은 역할을 정확하게 분리하지는 못할 것 같다.</p>\n<p>프론트 부분은 React를 이용해서 구현했고 팀원들이 hooks를 모르는 상황이었기 때문에 class형 컴포넌트로 코드를 작성했다. 반응형 디자인을 적용하기 위한 작업도 포함되었고, 페이지 설계를 위한 디자인 작업도 병행했다.</p>\n<p>백엔드는 팀원들 모두 express를 알고 있어서 express로 구현하기로 했고, 로그인과 회원가입에는 passport를 도입했다.</p>\n<p>데이터베이스는 팀원들이 그나마 익숙하게 사용하고 있던 MySQL을 이용하기로 했고, 내가 SQL문에 익숙하지 않은 상태여서 라우터 부분은 sequelize ORM을 이용하여 작성했다.</p>\n<p>익스텐션은 크롤링 서버에 html 문서를 string으로 전달했는데</p>\n<p>크롤링 서버에서는 cheerio 라이브러리를 이용해서 html 문서에서 데이터를 추출했다.</p>\n<p>크롤링 부분은 처음부터 참여한게 아니라 중간부터 참여했고 추출한 데이터를 DB에 어떤 형식으로 저장할것인가를 함께 고민했다.</p>\n<h2 id=\"폼-데이터를-어떻게-저장했는가\" style=\"position:relative;\"><a href=\"#%ED%8F%BC-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%A0%80%EC%9E%A5%ED%96%88%EB%8A%94%EA%B0%80\" aria-label=\"폼 데이터를 어떻게 저장했는가 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>폼 데이터를 어떻게 저장했는가</h2>\n<p>데이터를 어떻게 저장하는지는 직접 폼을 제출해보면서 확인해보면 될 것 같다.</p>\n<p>일단 저장할 폼을 준비해봤다.</p>\n<img width=\"949\" alt=\"kakao-form\" src=\"https://user-images.githubusercontent.com/35721370/110233354-c8f7b200-7f66-11eb-9d8f-adb4da5ceca0.png\">\n<p><a href=\"https://pomp.leed.at/\">pomp.leed.at</a>에서 회원가입을 한 후에</p>\n<p><a href=\"https://chrome.google.com/webstore/detail/pomp/gmajhmdbmhadglgnommlpinilbaenalb?hl=ko\">크롬 익스텐션</a>을 설치하고 나서 로그인을 해야 한다.</p>\n<p>크롬 익스텐션에서 로그인을 마치고 나서</p>\n<img width=\"909\" alt=\"exlogin\" src=\"https://user-images.githubusercontent.com/35721370/110233351-c7c68500-7f66-11eb-91f6-06363c358087.png\">\n<img width=\"889\" alt=\"exlogined\" src=\"https://user-images.githubusercontent.com/35721370/110233352-c85f1b80-7f66-11eb-88e9-5f13c543a8a3.png\">\n<p>저장 기능을 ON한 상태로 제출하기만 하면 된다.</p>\n<img width=\"887\" alt=\"submit\" src=\"https://user-images.githubusercontent.com/35721370/110233357-c9904880-7f66-11eb-858a-63505d4c1835.png\">\n<img width=\"885\" alt=\"complete\" src=\"https://user-images.githubusercontent.com/35721370/110233346-c5fcc180-7f66-11eb-8a96-35a81f7511dc.png\">\n<p>pomp.leed.at과 pomp 익스텐션의 로그인 상태를 동기화 시켰기 때문에</p>\n<p>pomp 페이지에서 따로 로그인 하지 않아도 로그인이 반영되어 있다.</p>\n<p>반대로 익스텐션이나 pomp페이지에서 로그아웃을 하면 모두 로그아웃 상태가 반영된다.</p>\n<p>pomp.leed.at에 접속하게 되면 바로 메인 페이지로 redirect되게 되는데,</p>\n<p>메인 페이지에서 내가 제출한 폼을 확인해 볼 수 있다.</p>\n<img width=\"948\" alt=\"main-page\" src=\"https://user-images.githubusercontent.com/35721370/110233355-c8f7b200-7f66-11eb-833a-1393528db910.png\">\n<p>폼을 클릭하게 되면 디테일 페이지로 넘어가서 렌더링 된 데이터를 확인할 수 있다.</p>\n<img width=\"948\" alt=\"detail1\" src=\"https://user-images.githubusercontent.com/35721370/110233348-c72dee80-7f66-11eb-8eed-536aa54b3604.png\">\n<img width=\"948\" alt=\"detail2\" src=\"https://user-images.githubusercontent.com/35721370/110233350-c7c68500-7f66-11eb-9c71-4eb86e7839e0.png\">\n<p>이제 데이터가 어떻게 저장되었는지 확인해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"desc\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"본 설문은 2/28(일) 대회 이후 진행되는 스트리밍 중 kakao 기업 소개 및 Q&amp;A 파트에서 다뤄질 질문에 대한 사전 조사입니다.이 설문을 제출해주신 분들 중 5명을 추첨하여 만원 상당의 기프티콘을 발송해 드릴 예정이니 많은 참여 부탁드립니다.2월 17일 23시 59분까지 제출 가능하며, 응답 수정이 가능하니 참고하시기 바랍니다. \"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token number\">-1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"kakao 후원 세션 질문 사전조사\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"formUrl\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://docs.google.com/forms/d/e/1FAIpQLScFVi0IAiWeRtywJaM1pM6duIIrDV2U5uEcWpspZk2zL-Kfbg/viewform?fbzx=4113599779061987264\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"ans\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"홍익대학교\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"desc\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"list\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"서강대학교\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"숙명여자대학교\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"연세대학교\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"이화여자대학교\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"홍익대학교\"</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"학교 *\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"ans\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"김경근\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"desc\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"list\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"이름 *\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"ans\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"01012345678\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"desc\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"연락처는 기프티콘 발송을 위해 수집합니다.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"list\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"연락처 *\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"ans\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"카카오 추천팀에서는 어떤일을 하나요?\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"desc\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"자유롭게 작성해주시되, 질문이 여러개인 경우 번호로 구분하여 작성해 주세요. 감사합니다.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"list\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"질문 *\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>폼의 각 섹션을 기준으로 제목과 설명, 선택지와 유저가 제출한 답, 섹션이 단답형인지 객관식인지, 어떤 형태인지를 나타내는 타입까지 포함되어 있는 것을 확인 할 수 있다.</p>\n<p>폼 데이터는 각 섹션들의 배열로 저장했고, 어떤 유저가 제출했는지 구별할 수 있도록 로그인 동기화를 위해 사용했던 uuid값을 따로 저장하게 했다.</p>\n<p>위에서 제출했던 폼에는 단답형과 장문형, 객관식 선택으로만 구성되어 있었는데, 이외에도 구글 폼에서 지원하는 다양한 포맷들도 데이터 추출후 DB에 저장할 수 있게 했다.</p>\n<h2 id=\"-배포는-어떻게-했는가\" style=\"position:relative;\"><a href=\"#-%EB%B0%B0%ED%8F%AC%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%96%88%EB%8A%94%EA%B0%80\" aria-label=\" 배포는 어떻게 했는가 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🚀 배포는 어떻게 했는가</h2>\n<p>프로젝트가 어느정도 완성 되고 나서 배포에 대한 부분을 고민하게 되었는데</p>\n<p>나는 배포쪽 지식이 거의 전무해서 다른 팀원에게 의지할 수 밖에 없었다.</p>\n<p>배포는 docker와 nginx를 이용해서 클라우드 서버에 배포했다.</p>\n<p>처음에는 아니었지만 현재는 DB와 백엔드 부분을 분리한 상태다.</p>\n<p>로그인 세션과 폼 데이터를 같은 DB서버에 저장하는 방식인데,</p>\n<p>로그인과 로그아웃을 할 때마다 DB서버에서 세션을 저장하고 지우기 때문에 DB서버에 무리를 주는 방식이라는 점을 뒤늦게 깨달았다.</p>\n<p>팀원들과 논의해봐야 하겠지만 개인적으로 로그인 세션을 폼 데이터를 저장하는 DB서버와 분리하여 Redis같은 메모리 DB에 따로 저장하는 방식을 고민중이다.</p>\n<h2 id=\"나는-어떤-역할을-맡았는가\" style=\"position:relative;\"><a href=\"#%EB%82%98%EB%8A%94-%EC%96%B4%EB%96%A4-%EC%97%AD%ED%95%A0%EC%9D%84-%EB%A7%A1%EC%95%98%EB%8A%94%EA%B0%80\" aria-label=\"나는 어떤 역할을 맡았는가 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>나는 어떤 역할을 맡았는가</h2>\n<p>일단 나는 백엔드 부분을 메인 역할로 맡았고 프론트 부분, 특히 React 부분을 많이 도왔던 것 같다.</p>\n<p>백엔드 부분도 나 혼자 한게 아니라 팀원들과 함께 작업했다.</p>\n<p>위에서 설명했던 폼 데이터 모델뿐만 아니라 유저 모델을 팀원들과 같이 설계했다.</p>\n<p>passport를 도입해서 로그인과 회원가입을 구현했는데 kakao와 google계정으로도 로그인 할 수 있게 했다.</p>\n<p>passport 도입 부분은 제로초님의 노드교과서를 많이 참고했던 것 같다.</p>\n<p>로그인의 경우 세션쿠키를 브라우저에 전달하고 세션을 MySQL 서버에 저장하는 방식으로 구현했다.</p>\n<p>팀원들이 이전까지는 ejs나 pug같은 템플릿엔진을 이용해서 프론트를 구현해왔기 때문에 리액트의 프론트 서버와 백엔드의 API서버와 통신하는 방식에 대해 구체적으로 알지 못하는 상태였고, 이 부분은 이전에 내가 따로 튜토리얼 강좌를 보고 보일러플레이트를 제작해본 경험을 바탕으로 구현할 수 있었다.</p>\n<p>폼의 내용이 되는 섹션별 컴포넌트를 팀원들과 같이 작업했고, 이외에 로그인 페이지나 메인 페이지 부분도 팀원들과 함께 작업했다.</p>\n<p>프론트 서버와 백엔드 서버의 포트번호가 다르기 때문에 React에서 proxy설정을 따로 해줌으로써 데이터를 원활하게 주고 받을 수 있도록 했다.</p>\n<p>배포단계에서는 리액트 proxy부분을 걷어내고 nginx에서 proxy처리를 하는 방식으로 바꿨다.</p>\n<p>익스텐션도 처음부터 개발에 참여하지는 못했지만 pomp 페이지와 익스텐션간의 로그인 동기화 부분을 팀원들과 같이 구현했다.</p>\n<p>익스텐션 개발 경험이 없어서 프로젝트 초반에 다같이 헤멨던 것 같다.</p>\n<p>결국 익스텐션 부분은 익스텐션을 담당했던 팀원이 대부분 해결해줘서 도중에 프로젝트가 막히지 않고 계속 진행될 수 있었다.</p>\n<h2 id=\"️-직면했던-어려움들과-해결한-방법들\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EC%A7%81%EB%A9%B4%ED%96%88%EB%8D%98-%EC%96%B4%EB%A0%A4%EC%9B%80%EB%93%A4%EA%B3%BC-%ED%95%B4%EA%B2%B0%ED%95%9C-%EB%B0%A9%EB%B2%95%EB%93%A4\" aria-label=\"️ 직면했던 어려움들과 해결한 방법들 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🛠️ 직면했던 어려움들과 해결한 방법들</h2>\n<p>제작하면서 정말 많은 어려움이 있었지만 내가 직면했던 문제들을 정리해보고자 한다.</p>\n<h3 id=\"로그인-세션-저장-문제\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EC%84%B8%EC%85%98-%EC%A0%80%EC%9E%A5-%EB%AC%B8%EC%A0%9C\" aria-label=\"로그인 세션 저장 문제 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로그인 세션 저장 문제</h3>\n<p>프로젝트 초반에 인증 시스템의 대부분을 구현하고 나서 session을 MySQL서버에 저장하는 과정을 진행하다가 발생했던 오류이다.</p>\n<p>프론트 부분에 React를 연결하기 전에는 로그인 테스트를 위해 템플릿 엔진을 이용하고 있었다. </p>\n<p>로그인하고 나서 로그인이 반영된 페이지로 전환이 일어나지 않는 문제가 발생했고, 이상하게 새로고침을 해야 로그인이 반영되는 상황이 발생했다.</p>\n<p>정말 당혹스러웠던 점은 로그인 이후에 정상적으로 반영될 때도 있었고 새로고침을 해야 반영되는 상황이 번갈아서 발생한다는 점이었다.</p>\n<p>처음에는 passport상의 문제로 생각하고 접근했지만 오랜 고민 끝에 DB에 세션이 저장되기 전에 redirect과정을 실행해서 로그인이 제대로 반영되지 않았다는 것을 알게되었다.</p>\n<p>이 부분은 로그인 코드에 세션이 DB에 저장되고 나서 redirect를 하게끔 콜백함수를 넣어줌으로써 해결할 수 있었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Before</span>\n<span class=\"token keyword\">return</span> req<span class=\"token punctuation\">.</span><span class=\"token function\">login</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">,</span> <span class=\"token parameter\">loginError</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>loginError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>loginError<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>loginError<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 세션 쿠키를 브라우저로 보낸다.</span>\n  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost:8001'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">301</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// After</span>\n<span class=\"token keyword\">return</span> req<span class=\"token punctuation\">.</span><span class=\"token function\">login</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">,</span> <span class=\"token parameter\">loginError</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>loginError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>loginError<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>loginError<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 세션 쿠키를 브라우저로 보낸다.</span>\n    req<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n      res<span class=\"token punctuation\">.</span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"익스텐션-개발\" style=\"position:relative;\"><a href=\"#%EC%9D%B5%EC%8A%A4%ED%85%90%EC%85%98-%EA%B0%9C%EB%B0%9C\" aria-label=\"익스텐션 개발 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>익스텐션 개발</h3>\n<p>백엔드 부분과 프론트 부분을 어느 정도 구현하고 나서 크롬 익스텐션 개발을 시작했는데, 참고할만한 자료를 찾는 것도 힘들었고 무엇보다 지금까지 해왔던 개발과는 다르게 보안 문제 방지를 위한 엄격한 규칙을 따라야 했다.</p>\n<p>익스텐션 구현은 내가 아닌 팀원이 대부분 구현했기 때문에 자세하게 설명하기는 힘들겠지만, 내가 이해한 만큼 설명을 해보려고 한다.</p>\n<p>학교 클래스넷과 관련된 익스텐션을 만들어 볼 예정이라 직접 익스텐션을 개발하게 되었을 때 설명을 더 보충할 생각이다.</p>\n<p>일단 크롬 익스텐션은 하나의 개발 영역이 아닌 백그라운드와 다른 영역으로 나뉘게 되는데, 익스텐션에서 일어나는 모든 동작들은 무조건 백그라운드를 거쳐야 한다.</p>\n<p>예를 들면 익스텐션에서 팝업창을 띄워야 할 때 익스텐션 상에서 바로 팝업창을 띄우는 동작을 불가능하다는 것이다.</p>\n<p>일단 백그라운드에 메시지를 보내는 방식을 취해야 하고 메시지를 받은 백그라운드는 팝업창을 띄우는 부분에 메시지를 보내 동작할 수 있게 한다.</p>\n<p>POMP에서는 익스텐션과 서버, 프론트끼리 통신하는 방식으로 이루어졌는데 백그라운드와 관련된 내용을 알지 못했기에 이 부분을 이해하는데 시간이 걸렸던 것 같다.</p>\n<h3 id=\"폼이-여러-페이지인-경우\" style=\"position:relative;\"><a href=\"#%ED%8F%BC%EC%9D%B4-%EC%97%AC%EB%9F%AC-%ED%8E%98%EC%9D%B4%EC%A7%80%EC%9D%B8-%EA%B2%BD%EC%9A%B0\" aria-label=\"폼이 여러 페이지인 경우 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>폼이 여러 페이지인 경우</h3>\n<p>익스텐션 개발을 시작하고 나서 크롤링 서버로 폼 데이터를 보내는 부분을 개발하게 되었다.</p>\n<p>그런데 폼데이터를 받아오는 테스트를 하다가 간과한 사실이 있다는 걸 깨닫게 되는데 바로 폼이 여러 페이지인 경우를 전혀 고려하지 않았다는 것이다.</p>\n<p>지금 생각해보면 페이지가 하나인 폼으로만 테스트를 해와서 이 부분을 간과하지 않았나 싶다.</p>\n<p>폼의 페이지 처리를 위해 구글 폼의 다음 페이지 버튼이 클릭 될 경우 크롬 익스텐션의 Local Storage에 페이지 별로 저장하고 제출 버튼을 누르는 경우 크롤링 서버에 페이지 별로 구별해서 보내는 방식으로 구현해냈다.</p>\n<p>그리고 폼을 어려개 띄워놓고 제출하는 상황에서 폼 데이터가 섞여버리는 오류를 방지하기 위해 폼 URL의 ID값을 Local Storage의 key값에 포함하여 저장했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">document\n  <span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.appsMaterialWizButtonPaperbuttonFilled'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ele<span class=\"token punctuation\">,</span> idx</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 클릭하면</span>\n    ele<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      chrome<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span>local<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'switch'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'uuid'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 스위치가 꺼져있다면 return;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>data<span class=\"token punctuation\">.</span>switch<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// 마지막 페이지 HTML 저장</span>\n        chrome<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span>local<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          <span class=\"token punctuation\">[</span><span class=\"token string\">'docs-'</span> <span class=\"token operator\">+</span>\n          document<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>\n            document<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">2</span>\n          <span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span>\n          <span class=\"token string\">'-'</span> <span class=\"token operator\">+</span>\n          document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pageHistory'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'body'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>outerHTML<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// background에 post요청</span>\n        chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> msg<span class=\"token operator\">:</span> <span class=\"token string\">'postHTML'</span><span class=\"token punctuation\">,</span> link<span class=\"token operator\">:</span> location<span class=\"token punctuation\">.</span>href <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위의 코드처럼 Local Storage에 데이터를 저장하고 백그라운드에 메시지를 보내게 되는데, 백그라운드에서 제출한 폼에 해당되는 데이터만 따로 가공하여 유저 UUID와 함께 크롤링 서버로 전송하도록 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 백그라운드</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">postHTML</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">href</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> formKey <span class=\"token operator\">=</span> href<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>href<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> toSendKey<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 현재 FORM에 해당하는 HTML의 key만 가져옴</span>\n  chrome<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span>local<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">items</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    toSendKey <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val<span class=\"token punctuation\">,</span> idx</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>formKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        toSendKey<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 현재 FORM에 해당하는 HTML의 value와 uuid 가져옴</span>\n  <span class=\"token keyword\">let</span> toSendVal <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    uuid<span class=\"token punctuation\">;</span>\n  chrome<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span>local<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">items</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    uuid <span class=\"token operator\">=</span> items<span class=\"token punctuation\">.</span>uuid<span class=\"token punctuation\">;</span>\n    Object<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val<span class=\"token punctuation\">,</span> idx</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>toSendKey<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        toSendVal<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> val<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 서버로 전송</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> xhr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    xhr<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'URL'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    xhr<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      xhr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>\n        <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          uuid<span class=\"token operator\">:</span> uuid<span class=\"token punctuation\">,</span>\n          formUrl<span class=\"token operator\">:</span> href<span class=\"token punctuation\">,</span>\n          question<span class=\"token operator\">:</span> toSendVal<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"로그인-동기화\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EB%8F%99%EA%B8%B0%ED%99%94\" aria-label=\"로그인 동기화 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로그인 동기화</h3>\n<p>폼 데이터를 크롤링 서버로 전송하여 DB에 저장하는 것 까지는 구현했지만, 크롬 익스텐션과 POMP페이지간의 로그인 여부와 동기화 되지 않아서 두 클라이언트가 따로 노는 상황이 발생했다.</p>\n<p>이 문제를 해결하기 위해 익스텐션이나 POMP 페이지의 로그인 상태를 동기화 해서 둘 중 한군데만 로그인해도 둘 다 로그인 되도록 하고 싶었고, 둘 중 하나에서 로그아웃시 모두 로그아웃 되도록 구현하고 싶었다.</p>\n<p>이 부분은 나를 포함한 팀원들 모두 처음 개발해보는 것이어서 어떻게 구현해낼지 고민을 많이 했던 것 같다.</p>\n<p>일단 유저를 중복되지 않는 값으로 구별해야 한다는 생각을 했고, 여기서 UUID를 도입하여 유저가 회원가입을 할때 고유한 UUID값을 생성하여 유저 정보와 함께 DB에 저장할 수 있도록 했다.</p>\n<p>또한 로그인 하여 req.user가 존재하는 경우에 UUID 값을 전송하는 라우터를 작성하여 프론트와 익스텐션에서 어떤 유저가 로그인 한 상태인지 알 수 있도록 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 로그인 상태와 유저 이름, 유저 uuid값을 전송하는 라우터</span>\nrouter<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      username<span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>nick<span class=\"token punctuation\">,</span>\n      isAuth<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      user<span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>userUUID<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> isAuth<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>익스텐션의 경우 POMP 페이지에서 로그인을 하게 되면 바로 로그인 상태가 반영되도록 하고 싶었는데 마땅한 방법을 찾지 못해서 고민하고 있었다.</p>\n<p>이 부분은 익스텐션을 대부분 구현한 팀원이 해결했는데, 유저가 크롬 익스텐션을 클릭할시 popup.js가 실행되도록 해서 익스텐션을 클릭했을 때 서버에 로그인 여부를 받아와 익스텐션의 local Storage에 유저 UUID값을 저장하도록 했다.</p>\n<p>서버로부터 UUID값을 받아옴으로써 로그인 여부를 익스텐션에 저장하도록 했고, UUID값의 존재여부에 따라 익스텐션의 상태를 변경하도록 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//서버에서 uuid값을 받아오는 익스텐션의 코드</span>\nchrome<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span>local<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'uuid'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'switch'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>uuid <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>data<span class=\"token punctuation\">.</span>switch<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> xhr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  xhr<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'https://pompserver.leed.at/api/auth/chkiflogined'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  xhr<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> uuid <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>uuid<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//지금 서버상으로는 로그인 상태</span>\n      chrome<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span>local<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> uuid<span class=\"token operator\">:</span> uuid<span class=\"token punctuation\">,</span> <span class=\"token keyword\">switch</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">result</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.switch--status'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'ON'</span><span class=\"token punctuation\">;</span>\n      document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'show'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hide'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.logout'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'show'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.logout'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hide'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.switch--stick'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'on--stick'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.switch--ball'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'on--ball'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.switch--stick'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'off--stick'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.switch--ball'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'off--ball'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.switch--container'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'show'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.switch--container'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hide'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  xhr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>서버에서는 로그인이 된 상태, 즉 req.user가 존재하는 경우에만 uuid 값을 전달하도록 코드를 작성하였다. 로그인 여부를 확인하는 코드는 자주 사용되는 만큼 따로 middleware로 빼내서 작성했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 로그인 된 상태에만 uuid 값을 전달하도록 했다.</span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">isNotLoggedIn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>req<span class=\"token punctuation\">.</span><span class=\"token function\">isAuthenticated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      message<span class=\"token operator\">:</span> <span class=\"token string\">'로그인 상태입니다'</span><span class=\"token punctuation\">,</span>\n      uuid<span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>userUUID<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// isNotLoggedIn 미들웨어를 통과하는 경우에는</span>\n<span class=\"token comment\">// 로그인이 안 된 상태를 나타내므로 message를 반환하도록 했다.</span>\nrouter<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/chkiflogined'</span><span class=\"token punctuation\">,</span> isNotLoggedIn<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    message<span class=\"token operator\">:</span> <span class=\"token string\">'not logged in'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>일단 로그인 상태를 동기화 하는데에는 성공했지만 UUID값을 Local Storage에 저장하는 방식은 다른 사람에 의해 UUID값이 탈취될 수 있는 방식이어서 보안을 생각했을 때 좋은 방식이 아니라는 생각이 들었다.</p>\n<p>아직까지는 내 실력이 부족해서 위의 방식으로 구현하는데 그쳤지만, 나중에 더 좋은 방식을 접하게 된다면 코드를 수정할 생각이다.</p>\n<h3 id=\"validation-error-동일한-이메일-존재-오류-해결\" style=\"position:relative;\"><a href=\"#validation-error-%EB%8F%99%EC%9D%BC%ED%95%9C-%EC%9D%B4%EB%A9%94%EC%9D%BC-%EC%A1%B4%EC%9E%AC-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\" aria-label=\"validation error 동일한 이메일 존재 오류 해결 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>validation error: 동일한 이메일 존재 오류 해결</h3>\n<p>각종 테스트를 해보면서 미처 생각하지 못했던 부분에서 오류를 찾아낼 수 있었다.</p>\n<p>local로 만든 계정과 동일한 이메일로 kakao나 google로 로그인하는 경우혹은 그 반대의 경우를 막아야 한다는 점을 놓치고 있었고 이 부분 때문에 passport에서 validation error가 발생하고 있었다.</p>\n<p>보안문제를 고려했을 때 회원가입한 정보대로 로그인을 강제해야 한다는 생각을 하게 되었고, 실제로 tistory에서 동일한 오류를 잡아주는 것을 보았기 때문에 POMP에서도 비슷하게 해결하고자 했다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/35721370/110233358-ca28df00-7f66-11eb-8a87-8b7dd45938d3.png\" alt=\"tistory\"></p>\n<p>같은 이메일이지만 회원가입한 정보와 다른 경우는 각 Strategy에 아래와 같은 코드를 통해 쉽게 걸러낼수 있었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> sameEmailUser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> User<span class=\"token punctuation\">.</span><span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  where<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> email<span class=\"token operator\">:</span> profile<span class=\"token punctuation\">.</span>_json<span class=\"token punctuation\">.</span>kakao_account<span class=\"token punctuation\">.</span>email <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>sameEmailUser<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 카카오로 가입하진 않았지만 local or 구글 계정이 동일한 이메일로 존재하는 경우 처리</span>\n  sameEmailUser<span class=\"token punctuation\">.</span><span class=\"token function\">setDataValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">'duplicate'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'yes'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// console.log(sameEmailUser)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> sameEmailUser<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    loginError<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    message<span class=\"token operator\">:</span> <span class=\"token string\">\"Please Login with Method you've joined Pomp\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>passport.authenticate 함수에 done 콜백함수를 전달하고 나서 이메일 중복 문제가 발생했을 경우 authenticate 함수내에서 프론트에 오류 상황에 대한 응답을 하고 싶었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">router<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">'/kakao/callback'</span><span class=\"token punctuation\">,</span>\n  passport<span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'kakao'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    failureRedirect<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'&lt;script>window.location.href=\"http://pomp.leed.at/forms\";&lt;/script>'</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>여기서 1차적으로 막히게 되었는데 authenticate 함수내에서 express의 res 객체에 접근하지 못했기 때문이다.</p>\n<p>가능한 방법을 찾다가 가까스로 제로초님의 노드교과서에서 배웠던 미들웨어 확장패턴을 기억해냈고, 미들웨어 안에서 passport의 authenticate 함수를 호출할 수 있도록 미들웨어를 확장하여 문제를 해결할 수 있었다.</p>\n<p>하지만 2차적으로 문제가 발생했는데 미들웨어 확장 이후에 로그인이 되지 않는 문제였다.</p>\n<p>미들웨어 확장패턴외에 res객체를 사용할 수 있는 방법이 생각나지 않아 확장패턴을 고수할 수 밖에 없었는데 마땅한 방법이 생각이 안나서 해결방법을 오랜시간 동안 고민했던 것 같다.</p>\n<p>해결방법은 local Strategy의 authenticate방식에서 얻을 수 있었는데 req.login으로 Serialize user하는 코드를 추가함으로써 해결할 수 있었다.</p>\n<p>지금까지 kakao나 google 로그인의 경우 passport.authenticate 함수내에서 req.login 함수를 호출하지 않는 방식으로 코드를 작성했는데 생각해보면 따로 콜백함수를 달아주지 않았기 때문에 자동으로 Serialize user를 해줬던 것 같다.</p>\n<p>이메일 중복상황을 체크하고 미들웨어를 확장하면서 콜백함수가 생겼기 때문에 local방식과 마찬가지로 req.login을 호출해야 했던 것이다. </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">router<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/kakao/callback'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  passport<span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'kakao'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">authError<span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">,</span> info</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>authError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>authError<span class=\"token punctuation\">)</span>\n      <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>authError<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>dataValues<span class=\"token punctuation\">.</span>duplicate<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> req<span class=\"token punctuation\">.</span><span class=\"token function\">login</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">,</span> <span class=\"token parameter\">loginError</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>loginError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>loginError<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>loginError<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 세션 쿠키를 브라우저로 보낸다.</span>\n        req<span class=\"token punctuation\">.</span>session<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n          <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string\">'&lt;script>window.location.href=\"http://pomp.leed.at/forms\";&lt;/script>'</span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>여기서 passport에 대한 이해도가 많이 부족하다는 점을 깨달았다.</p>\n<p>또한 무턱대고 passport를 도입한 것 때문에 다른 팀원들도 힘들게 했던 것 같다는 생각이 들었다.</p>\n<p>프론트 부분에도 tistory와 비슷하게 동일한 계정이 이미 존재한다는 사실을 알려주는 컴포넌트를 보여주게 해서 validation error 처리를 마무리 할 수 있었다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/35721370/110233359-ca28df00-7f66-11eb-9f63-be7fcc1ac095.png\" alt=\"validation-error\"></p>\n<p>이외에도 더 있지만 제때 정리하지 못해서 잊혀진 것들이 많은 것 같아서 아쉽다. </p>\n<p>해결여부와 관계없이 직면했던 문제들을 정리하는 습관을 들여야 겠다는 생각이 들었다.</p>\n<h2 id=\"-pomp에서-느꼈던-점\" style=\"position:relative;\"><a href=\"#-pomp%EC%97%90%EC%84%9C-%EB%8A%90%EA%BC%88%EB%8D%98-%EC%A0%90\" aria-label=\" pomp에서 느꼈던 점 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 POMP에서 느꼈던 점</h2>\n<h3 id=\"배포에-대한-공부-필요\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%ED%8F%AC%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B3%B5%EB%B6%80-%ED%95%84%EC%9A%94\" aria-label=\"배포에 대한 공부 필요 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배포에 대한 공부 필요</h3>\n<p>일단 내가 배포에 대해 거의 알고 있는게 없어서 모든 배포를 팀원 한명이 담당해야 했는데</p>\n<p>팀원에게 배포비용을 모두 부담하게 하고 있어서 이 점에 대해서는 미안함을 느끼고 있다.</p>\n<p>인프라와 클라우드 공부가 필요하다고 느끼게 되었고, 간단한 토이프로젝트라도 스스로 배포과정까지 경험해보려고 노력하고 있다.</p>\n<h3 id=\"프로젝트에-대한-이해-부족\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9D%B4%ED%95%B4-%EB%B6%80%EC%A1%B1\" aria-label=\"프로젝트에 대한 이해 부족 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프로젝트에 대한 이해 부족</h3>\n<p>프로젝트를 협업을 통해 진행했기 때문에 POMP에 대한 내용을 질문받게 되었을 때 크롬 익스텐션 부분과 크롤링부분은 내가 기여한 부분이 적기 때문에 제대로 대답하지 못 할 것 같다</p>\n<p>내가 작성하지 않았던 코드들도 살펴볼 생각이다.</p>\n<h3 id=\"커뮤니케이션의-중요성\" style=\"position:relative;\"><a href=\"#%EC%BB%A4%EB%AE%A4%EB%8B%88%EC%BC%80%EC%9D%B4%EC%85%98%EC%9D%98-%EC%A4%91%EC%9A%94%EC%84%B1\" aria-label=\"커뮤니케이션의 중요성 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>커뮤니케이션의 중요성</h3>\n<p>이 프로젝트를 협업하면서 나름대로 느꼈던 점은 팀프로젝트에서 가장 중요한 것은 커뮤니케이션이라는 점이다.</p>\n<p>프로젝트 초반에 개인프로젝트 하듯이 접근을 하게 되었던 것 같은데 무턱대고 인증과정에 passport를 도입했고, sequelize를 이용해서 마음대로 코드를 작성기도 해서 다른 팀원들로 하여금 백엔드 작업을 할 때 적지 않은 피로감을 느끼게 만들었던 것 같다.</p>\n<p>내가 알고 있는 기술을 무턱대고 도입하는게 아니라 다른 팀원들을 설득시키면서 프로젝트를 진행해야 한다는 것을 깨달았고 팀프로젝트인 만큼 나에게 맞추기보다는 최대한 다른 팀원들에게 맞추는 것이 맞는 방식이라는 생각을 하게 되었다.</p>\n<p>프론트 부분을 작업할 당시에도 나를 제외한 팀원들이 hooks에 익숙한 상태가 아니었기 때문에</p>\n<p>이 때만큼은 내 의견을 고집하지 않고 최대한 팀원들에게 맞추려고 노력했다.</p>\n<p>때문에 POMP의 프론트 부분은 class형 컴포넌트로 작성되어 있고 팀원들이 차츰 hooks에 적응하고 나서 부분적으로 hooks를 이용하여 코드를 작성했다. </p>\n<h3 id=\"협업-방식\" style=\"position:relative;\"><a href=\"#%ED%98%91%EC%97%85-%EB%B0%A9%EC%8B%9D\" aria-label=\"협업 방식 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>협업 방식</h3>\n<p>POMP 프로젝트를 진행하면서 원래 나누었던 역할대로 작업하는게 아니라 프로젝트 진행을 위해 막힌 부분을 함께 고민하고 같이 작업하게 되다 보니까 어떤 팀원의 경우 배포를 담당하면서 익스텐션, 크롤링 코드를 작성했고 백엔드 부분과 프론트 작업까지 같이 하게 되는 말그대로 전체 과정에 관여하게 되는 상황이 발생했다.</p>\n<p>물론 이런 방식이 무조건  나쁘다는 것은 아니다. 하지만 나는 하나의 분야도 잘하기 어렵다고 생각하고 있고 개인적으로 풀스택 개발에는 회의적인 입장이어서 이런 방식대로 개발하는 것은 팀원 모두에게 피로감 느끼게 만든 것은 아닌가라는 생각이 들었다.</p>\n<p>물론 인원 부족으로 인해 어쩔수 없는 상황이었지만 프로젝트 이후에 좀 더 확실하게 분업화 된 협업에 대한 갈증이 생기게 되었고 더 나은 협업방식에 대해 많이 고민하게 된 것 같다.</p>\n<h3 id=\"리팩토링\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81\" aria-label=\"리팩토링 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리팩토링</h3>\n<p>최대한 정상적으로 작동하는 것을 우선적으로 고려해서 코드를 작성하다 보니까 반복되는 코드들도 많고 개인적으로 코드들에 리팩토링 과정이 필요하다고 느끼고 있다. </p>\n<p> JWT를 이용한 인증을 도입하는 것처럼 POMP에 사용했던 기술들 중에서 더 나은 방식으로 바꾸는 것도 고려중이어서 POMP 프로젝트는 아마 계속 진행 될 것 같다.</p>\n<p>팀원들도 POMP 이후에 서로 다른 프로젝트들을 작업하고 있어서 나를 포함한 팀원들이 성장하는 만큼 POMP의 코드들도 계속 발전하게 될 것 같다.</p>\n<h2 id=\"-마치며\" style=\"position:relative;\"><a href=\"#-%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\" 마치며 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🙏 마치며..</h2>\n<p>개인적으로 내가 부족했던 점이 많았다고 생각해서 함께 해준 팀원들에게 감사함을 느끼고 있다. POMP팀 모두 지금보다 성장해서 다음에도 같이 모여서 작업할 수 있으면 좋겠다.</p>\n<p>프로젝트 때문에 같이 고생했던 팀원들 블로그를 홍보차 올려본다.</p>\n<p><a href=\"https://cocosy.tistory.com/\">https://cocosy.tistory.com/</a></p>\n<p><a href=\"https://blog.soga.ng/storyline\">https://blog.soga.ng/storyline</a>/</p>\n<p>(Last updated: 2021.04.29)</p>","tableOfContents":"<ul>\n<li><a href=\"/essay/project-pomp/#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EB%A5%BC-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B2%8C-%EB%90%9C-%EC%9D%B4%EC%9C%A0\">프로젝트를 시작하게 된 이유</a></li>\n<li><a href=\"/essay/project-pomp/#pomp\">POMP?</a></li>\n<li><a href=\"/essay/project-pomp/#%EC%97%AD%ED%95%A0-%EB%B6%84%EB%8B%B4\">역할 분담</a></li>\n<li><a href=\"/essay/project-pomp/#%ED%8F%BC-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%A0%80%EC%9E%A5%ED%96%88%EB%8A%94%EA%B0%80\">폼 데이터를 어떻게 저장했는가</a></li>\n<li><a href=\"/essay/project-pomp/#-%EB%B0%B0%ED%8F%AC%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%96%88%EB%8A%94%EA%B0%80\">🚀 배포는 어떻게 했는가</a></li>\n<li><a href=\"/essay/project-pomp/#%EB%82%98%EB%8A%94-%EC%96%B4%EB%96%A4-%EC%97%AD%ED%95%A0%EC%9D%84-%EB%A7%A1%EC%95%98%EB%8A%94%EA%B0%80\">나는 어떤 역할을 맡았는가</a></li>\n<li>\n<p><a href=\"/essay/project-pomp/#%EF%B8%8F-%EC%A7%81%EB%A9%B4%ED%96%88%EB%8D%98-%EC%96%B4%EB%A0%A4%EC%9B%80%EB%93%A4%EA%B3%BC-%ED%95%B4%EA%B2%B0%ED%95%9C-%EB%B0%A9%EB%B2%95%EB%93%A4\">🛠️ 직면했던 어려움들과 해결한 방법들</a></p>\n<ul>\n<li><a href=\"/essay/project-pomp/#%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EC%84%B8%EC%85%98-%EC%A0%80%EC%9E%A5-%EB%AC%B8%EC%A0%9C\">로그인 세션 저장 문제</a></li>\n<li><a href=\"/essay/project-pomp/#%EC%9D%B5%EC%8A%A4%ED%85%90%EC%85%98-%EA%B0%9C%EB%B0%9C\">익스텐션 개발</a></li>\n<li><a href=\"/essay/project-pomp/#%ED%8F%BC%EC%9D%B4-%EC%97%AC%EB%9F%AC-%ED%8E%98%EC%9D%B4%EC%A7%80%EC%9D%B8-%EA%B2%BD%EC%9A%B0\">폼이 여러 페이지인 경우</a></li>\n<li><a href=\"/essay/project-pomp/#%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EB%8F%99%EA%B8%B0%ED%99%94\">로그인 동기화</a></li>\n<li><a href=\"/essay/project-pomp/#validation-error-%EB%8F%99%EC%9D%BC%ED%95%9C-%EC%9D%B4%EB%A9%94%EC%9D%BC-%EC%A1%B4%EC%9E%AC-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0\">validation error: 동일한 이메일 존재 오류 해결</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/essay/project-pomp/#-pomp%EC%97%90%EC%84%9C-%EB%8A%90%EA%BC%88%EB%8D%98-%EC%A0%90\">🤔 POMP에서 느꼈던 점</a></p>\n<ul>\n<li><a href=\"/essay/project-pomp/#%EB%B0%B0%ED%8F%AC%EC%97%90-%EB%8C%80%ED%95%9C-%EA%B3%B5%EB%B6%80-%ED%95%84%EC%9A%94\">배포에 대한 공부 필요</a></li>\n<li><a href=\"/essay/project-pomp/#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9D%B4%ED%95%B4-%EB%B6%80%EC%A1%B1\">프로젝트에 대한 이해 부족</a></li>\n<li><a href=\"/essay/project-pomp/#%EC%BB%A4%EB%AE%A4%EB%8B%88%EC%BC%80%EC%9D%B4%EC%85%98%EC%9D%98-%EC%A4%91%EC%9A%94%EC%84%B1\">커뮤니케이션의 중요성</a></li>\n<li><a href=\"/essay/project-pomp/#%ED%98%91%EC%97%85-%EB%B0%A9%EC%8B%9D\">협업 방식</a></li>\n<li><a href=\"/essay/project-pomp/#%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81\">리팩토링</a></li>\n</ul>\n</li>\n<li><a href=\"/essay/project-pomp/#-%EB%A7%88%EC%B9%98%EB%A9%B0\">🙏 마치며..</a></li>\n</ul>","frontmatter":{"title":"Project POMP 정리글","date":"March 07, 2021"}}},"pageContext":{"slug":"/essay/project-pomp/","previous":null,"next":{"fields":{"slug":"/essay/icpc-sinchon-활동을-마치며/"},"frontmatter":{"title":"ICPC Sinchon 활동을 마치며","category":"essay","draft":false}}}},"staticQueryHashes":["3128451518","521680639"]}